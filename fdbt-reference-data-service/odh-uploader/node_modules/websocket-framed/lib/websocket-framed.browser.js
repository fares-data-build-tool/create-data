/*
**  WebSocket-Framed -- Framed WebSocket Communication
**  Copyright (c) 2017-2019 Dr. Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.WebSocketFramed = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(_dereq_,module,exports){
(function (global){
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Encodr=t()}}(function(){return function(){return function t(r,e,n){function i(f,u){if(!e[f]){if(!r[f]){var a="function"==typeof _dereq_&&_dereq_;if(!u&&a)return a(f,!0);if(o)return o(f,!0);var s=new Error("Cannot find module '"+f+"'");throw s.code="MODULE_NOT_FOUND",s}var c=e[f]={exports:{}};r[f][0].call(c.exports,function(t){return i(r[f][1][t]||t)},c,c.exports,t,r,e,n)}return e[f].exports}for(var o="function"==typeof _dereq_&&_dereq_,f=0;f<n.length;f++)i(n[f]);return i}}()({1:[function(t,r,e){"use strict";e.byteLength=function(t){var r=s(t),e=r[0],n=r[1];return 3*(e+n)/4-n},e.toByteArray=function(t){for(var r,e=s(t),n=e[0],f=e[1],u=new o(function(t,r,e){return 3*(r+e)/4-e}(0,n,f)),a=0,c=f>0?n-4:n,h=0;h<c;h+=4)r=i[t.charCodeAt(h)]<<18|i[t.charCodeAt(h+1)]<<12|i[t.charCodeAt(h+2)]<<6|i[t.charCodeAt(h+3)],u[a++]=r>>16&255,u[a++]=r>>8&255,u[a++]=255&r;return 2===f&&(r=i[t.charCodeAt(h)]<<2|i[t.charCodeAt(h+1)]>>4,u[a++]=255&r),1===f&&(r=i[t.charCodeAt(h)]<<10|i[t.charCodeAt(h+1)]<<4|i[t.charCodeAt(h+2)]>>2,u[a++]=r>>8&255,u[a++]=255&r),u},e.fromByteArray=function(t){for(var r,e=t.length,i=e%3,o=[],f=0,u=e-i;f<u;f+=16383)o.push(h(t,f,f+16383>u?u:f+16383));return 1===i?(r=t[e-1],o.push(n[r>>2]+n[r<<4&63]+"==")):2===i&&(r=(t[e-2]<<8)+t[e-1],o.push(n[r>>10]+n[r>>4&63]+n[r<<2&63]+"=")),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,a=f.length;u<a;++u)n[u]=f[u],i[f.charCodeAt(u)]=u;function s(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");return-1===e&&(e=r),[e,e===r?0:4-e%4]}function c(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function h(t,r,e){for(var n,i=[],o=r;o<e;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(c(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(t,r,e){"use strict";var n=t("base64-js"),i=t("ieee754");e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function f(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=new Uint8Array(t);return r.__proto__=u.prototype,r}function u(t,r,e){if("number"==typeof t){if("string"==typeof r)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return a(t,r,e)}function a(t,r,e){if("string"==typeof t)return function(t,r){if("string"==typeof r&&""!==r||(r="utf8"),!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var e=0|p(t,r),n=f(e),i=n.write(t,r);return i!==e&&(n=n.slice(0,i)),n}(t,r);if(ArrayBuffer.isView(t))return h(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(j(t,ArrayBuffer)||t&&j(t.buffer,ArrayBuffer))return function(t,r,e){if(r<0||t.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<r+(e||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===r&&void 0===e?new Uint8Array(t):void 0===e?new Uint8Array(t,r):new Uint8Array(t,r,e)).__proto__=u.prototype,n}(t,r,e);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,r,e);var i=function(t){if(u.isBuffer(t)){var r=0|l(t.length),e=f(r);return 0===e.length?e:(t.copy(e,0,0,r),e)}return void 0!==t.length?"number"!=typeof t.length||V(t.length)?f(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),r,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return s(t),f(t<0?0:0|l(t))}function h(t){for(var r=t.length<0?0:0|l(t.length),e=f(r),n=0;n<r;n+=1)e[n]=255&t[n];return e}function l(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function p(t,r){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||j(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var e=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===e)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return D(t).length;default:if(i)return n?-1:N(t).length;r=(""+r).toLowerCase(),i=!0}}function d(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function y(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),V(e=+e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=u.from(r,n)),u.isBuffer(r))return 0===r.length?-1:v(t,r,e,n,i);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):v(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,r,e,n,i){var o,f=1,u=t.length,a=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;f=2,u/=2,a/=2,e/=2}function s(t,r){return 1===f?t[r]:t.readUInt16BE(r*f)}if(i){var c=-1;for(o=e;o<u;o++)if(s(t,o)===s(r,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===a)return c*f}else-1!==c&&(o-=o-c),c=-1}else for(e+a>u&&(e=u-a),o=e;o>=0;o--){for(var h=!0,l=0;l<a;l++)if(s(t,o+l)!==s(r,l)){h=!1;break}if(h)return o}return-1}function g(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;n>o/2&&(n=o/2);for(var f=0;f<n;++f){var u=parseInt(r.substr(2*f,2),16);if(V(u))return f;t[e+f]=u}return f}function w(t,r,e,n){return F(N(r,t.length-e),t,e,n)}function b(t,r,e,n){return F(function(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}(r),t,e,n)}function E(t,r,e,n){return b(t,r,e,n)}function m(t,r,e,n){return F(D(r),t,e,n)}function A(t,r,e,n){return F(function(t,r){for(var e,n,i,o=[],f=0;f<t.length&&!((r-=2)<0);++f)n=(e=t.charCodeAt(f))>>8,i=e%256,o.push(i),o.push(n);return o}(r,t.length-e),t,e,n)}function B(t,r,e){return 0===r&&e===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(r,e))}function x(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,f,u,a,s=t[i],c=null,h=s>239?4:s>223?3:s>191?2:1;if(i+h<=e)switch(h){case 1:s<128&&(c=s);break;case 2:128==(192&(o=t[i+1]))&&(a=(31&s)<<6|63&o)>127&&(c=a);break;case 3:o=t[i+1],f=t[i+2],128==(192&o)&&128==(192&f)&&(a=(15&s)<<12|(63&o)<<6|63&f)>2047&&(a<55296||a>57343)&&(c=a);break;case 4:o=t[i+1],f=t[i+2],u=t[i+3],128==(192&o)&&128==(192&f)&&128==(192&u)&&(a=(15&s)<<18|(63&o)<<12|(63&f)<<6|63&u)>65535&&a<1114112&&(c=a)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var r=t.length;if(r<=U)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=U));return e}(n)}e.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=function(t,r,e){return a(t,r,e)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,u.alloc=function(t,r,e){return function(t,r,e){return s(t),t<=0?f(t):void 0!==r?"string"==typeof e?f(t).fill(r,e):f(t).fill(r):f(t)}(t,r,e)},u.allocUnsafe=function(t){return c(t)},u.allocUnsafeSlow=function(t){return c(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,r){if(j(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),j(r,Uint8Array)&&(r=u.from(r,r.offset,r.byteLength)),!u.isBuffer(t)||!u.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var n=u.allocUnsafe(r),i=0;for(e=0;e<t.length;++e){var o=t[e];if(j(o,Uint8Array)&&(o=u.from(o)),!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)d(this,r,r+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)d(this,r,r+3),d(this,r+1,r+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)d(this,r,r+7),d(this,r+1,r+6),d(this,r+2,r+5),d(this,r+3,r+4);return this},u.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):function(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,r,e);case"utf8":case"utf-8":return x(this,r,e);case"ascii":return k(this,r,e);case"latin1":case"binary":return I(this,r,e);case"base64":return B(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},u.prototype.compare=function(t,r,e,n,i){if(j(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),f=(e>>>=0)-(r>>>=0),a=Math.min(o,f),s=this.slice(n,i),c=t.slice(r,e),h=0;h<a;++h)if(s[h]!==c[h]){o=s[h],f=c[h];break}return o<f?-1:f<o?1:0},u.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},u.prototype.indexOf=function(t,r,e){return y(this,t,r,e,!0)},u.prototype.lastIndexOf=function(t,r,e){return y(this,t,r,e,!1)},u.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(e)?(e>>>=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return g(this,t,r,e);case"utf8":case"utf-8":return w(this,t,r,e);case"ascii":return b(this,t,r,e);case"latin1":case"binary":return E(this,t,r,e);case"base64":return m(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function k(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function T(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=O(t[o]);return i}function S(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function P(t,r,e,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function C(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function _(t,r,e,n,o){return r=+r,e>>>=0,o||C(t,0,e,4),i.write(t,r,e,n,23,4),e+4}function L(t,r,e,n,o){return r=+r,e>>>=0,o||C(t,0,e,8),i.write(t,r,e,n,52,8),e+8}u.prototype.slice=function(t,r){var e=this.length;(t=~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),(r=void 0===r?e:~~r)<0?(r+=e)<0&&(r=0):r>e&&(r=e),r<t&&(r=t);var n=this.subarray(t,r);return n.__proto__=u.prototype,n},u.prototype.readUIntLE=function(t,r,e){t>>>=0,r>>>=0,e||R(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,r,e){t>>>=0,r>>>=0,e||R(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},u.prototype.readUInt8=function(t,r){return t>>>=0,r||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,r){return t>>>=0,r||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,r){return t>>>=0,r||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,r){return t>>>=0,r||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,r){return t>>>=0,r||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,r,e){t>>>=0,r>>>=0,e||R(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},u.prototype.readIntBE=function(t,r,e){t>>>=0,r>>>=0,e||R(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},u.prototype.readInt8=function(t,r){return t>>>=0,r||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,r){t>>>=0,r||R(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},u.prototype.readInt16BE=function(t,r){t>>>=0,r||R(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},u.prototype.readInt32LE=function(t,r){return t>>>=0,r||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,r){return t>>>=0,r||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,r){return t>>>=0,r||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,r){return t>>>=0,r||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,r){return t>>>=0,r||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,r){return t>>>=0,r||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,r,e,n){t=+t,r>>>=0,e>>>=0,n||P(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},u.prototype.writeUIntBE=function(t,r,e,n){t=+t,r>>>=0,e>>>=0,n||P(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},u.prototype.writeUInt8=function(t,r,e){return t=+t,r>>>=0,e||P(this,t,r,1,255,0),this[r]=255&t,r+1},u.prototype.writeUInt16LE=function(t,r,e){return t=+t,r>>>=0,e||P(this,t,r,2,65535,0),this[r]=255&t,this[r+1]=t>>>8,r+2},u.prototype.writeUInt16BE=function(t,r,e){return t=+t,r>>>=0,e||P(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=255&t,r+2},u.prototype.writeUInt32LE=function(t,r,e){return t=+t,r>>>=0,e||P(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t,r+4},u.prototype.writeUInt32BE=function(t,r,e){return t=+t,r>>>=0,e||P(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t,r+4},u.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r>>>=0,!n){var i=Math.pow(2,8*e-1);P(this,t,r,e,i-1,-i)}var o=0,f=1,u=0;for(this[r]=255&t;++o<e&&(f*=256);)t<0&&0===u&&0!==this[r+o-1]&&(u=1),this[r+o]=(t/f>>0)-u&255;return r+e},u.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r>>>=0,!n){var i=Math.pow(2,8*e-1);P(this,t,r,e,i-1,-i)}var o=e-1,f=1,u=0;for(this[r+o]=255&t;--o>=0&&(f*=256);)t<0&&0===u&&0!==this[r+o+1]&&(u=1),this[r+o]=(t/f>>0)-u&255;return r+e},u.prototype.writeInt8=function(t,r,e){return t=+t,r>>>=0,e||P(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=255&t,r+1},u.prototype.writeInt16LE=function(t,r,e){return t=+t,r>>>=0,e||P(this,t,r,2,32767,-32768),this[r]=255&t,this[r+1]=t>>>8,r+2},u.prototype.writeInt16BE=function(t,r,e){return t=+t,r>>>=0,e||P(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=255&t,r+2},u.prototype.writeInt32LE=function(t,r,e){return t=+t,r>>>=0,e||P(this,t,r,4,2147483647,-2147483648),this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4},u.prototype.writeInt32BE=function(t,r,e){return t=+t,r>>>=0,e||P(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t,r+4},u.prototype.writeFloatLE=function(t,r,e){return _(this,t,r,!0,e)},u.prototype.writeFloatBE=function(t,r,e){return _(this,t,r,!1,e)},u.prototype.writeDoubleLE=function(t,r,e){return L(this,t,r,!0,e)},u.prototype.writeDoubleBE=function(t,r,e){return L(this,t,r,!1,e)},u.prototype.copy=function(t,r,e,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i=n-e;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,e,n);else if(this===t&&e<r&&r<n)for(var o=i-1;o>=0;--o)t[o+r]=this[o+e];else Uint8Array.prototype.set.call(t,this.subarray(e,n),r);return i},u.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var f=u.isBuffer(t)?t:u.from(t,n),a=f.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<e-r;++o)this[o+r]=f[o%a]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function O(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],f=0;f<n;++f){if((e=t.charCodeAt(f))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(f+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function D(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function j(t,r){return t instanceof r||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===r.name}function V(t){return t!=t}},{"base64-js":1,ieee754:5}],3:[function(t,r,e){!function(t,e){"use strict";var n=Math.pow(2,-24),i=Math.pow(2,32),o=Math.pow(2,53),f={encode:function(t){var r,n=new ArrayBuffer(256),f=new DataView(n),u=0;function a(t){for(var e=n.byteLength,i=u+t;e<i;)e*=2;if(e!==n.byteLength){var o=f;n=new ArrayBuffer(e),f=new DataView(n);for(var a=u+3>>2,s=0;s<a;++s)f.setUint32(4*s,o.getUint32(4*s))}return r=t,f}function s(){u+=r}function c(t){s(a(1).setUint8(u,t))}function h(t){for(var r=a(t.length),e=0;e<t.length;++e)r.setUint8(u+e,t[e]);s()}function l(t,r){var e;r<24?c(t<<5|r):r<256?(c(t<<5|24),c(r)):r<65536?(c(t<<5|25),e=r,s(a(2).setUint16(u,e))):r<4294967296?(c(t<<5|26),function(t){s(a(4).setUint32(u,t))}(r)):(c(t<<5|27),function(t){var r=t%i,e=(t-r)/i,n=a(8);n.setUint32(u,e),n.setUint32(u+4,r),s()}(r))}if(function t(r){var n;if(!1===r)return c(244);if(!0===r)return c(245);if(null===r)return c(246);if(r===e)return c(247);switch(typeof r){case"number":if(Math.floor(r)===r){if(0<=r&&r<=o)return l(0,r);if(-o<=r&&r<0)return l(1,-(r+1))}return c(251),function(t){s(a(8).setFloat64(u,t))}(r);case"string":var i=[];for(n=0;n<r.length;++n){var f=r.charCodeAt(n);f<128?i.push(f):f<2048?(i.push(192|f>>6),i.push(128|63&f)):f<55296?(i.push(224|f>>12),i.push(128|f>>6&63),i.push(128|63&f)):(f=(1023&f)<<10,f|=1023&r.charCodeAt(++n),f+=65536,i.push(240|f>>18),i.push(128|f>>12&63),i.push(128|f>>6&63),i.push(128|63&f))}return l(3,i.length),h(i);default:var p;if(Array.isArray(r))for(l(4,p=r.length),n=0;n<p;++n)t(r[n]);else if(r instanceof Uint8Array)l(2,r.length),h(r);else{var d=Object.keys(r);for(l(5,p=d.length),n=0;n<p;++n){var y=d[n];t(y),t(r[y])}}}}(t),"slice"in n)return n.slice(0,u);for(var p=new ArrayBuffer(u),d=new DataView(p),y=0;y<u;++y)d.setUint8(y,f.getUint8(y));return p},decode:function(t,r,o){var f=new DataView(t),u=0;function a(t,r){return u+=r,t}function s(r){return a(new Uint8Array(t,u,r),r)}function c(){return a(f.getUint8(u),1)}function h(){return a(f.getUint16(u),2)}function l(){return a(f.getUint32(u),4)}function p(){return 255===f.getUint8(u)&&(u+=1,!0)}function d(t){if(t<24)return t;if(24===t)return c();if(25===t)return h();if(26===t)return l();if(27===t)return l()*i+l();if(31===t)return-1;throw"Invalid length encoding"}function y(t){var r=c();if(255===r)return-1;var e=d(31&r);if(e<0||r>>5!==t)throw"Invalid indefinite length element";return e}function v(t,r){for(var e=0;e<r;++e){var n=c();128&n&&(n<224?(n=(31&n)<<6|63&c(),r-=1):n<240?(n=(15&n)<<12|(63&c())<<6|63&c(),r-=2):(n=(15&n)<<18|(63&c())<<12|(63&c())<<6|63&c(),r-=3)),n<65536?t.push(n):(n-=65536,t.push(55296|n>>10),t.push(56320|1023&n))}}"function"!=typeof r&&(r=function(t){return t}),"function"!=typeof o&&(o=function(){return e});var g=function t(){var i,l,g=c(),w=g>>5,b=31&g;if(7===w)switch(b){case 25:return function(){var t=new ArrayBuffer(4),r=new DataView(t),e=h(),i=32768&e,o=31744&e,f=1023&e;if(31744===o)o=261120;else if(0!==o)o+=114688;else if(0!==f)return f*n;return r.setUint32(0,i<<16|o<<13|f<<13),r.getFloat32(0)}();case 26:return a(f.getFloat32(u),4);case 27:return a(f.getFloat64(u),8)}if((l=d(b))<0&&(w<2||6<w))throw"Invalid length";switch(w){case 0:return l;case 1:return-1-l;case 2:if(l<0){for(var E=[],m=0;(l=y(w))>=0;)m+=l,E.push(s(l));var A=new Uint8Array(m),B=0;for(i=0;i<E.length;++i)A.set(E[i],B),B+=E[i].length;return A}return s(l);case 3:var x=[];if(l<0)for(;(l=y(w))>=0;)v(x,l);else v(x,l);return String.fromCharCode.apply(null,x);case 4:var U;if(l<0)for(U=[];!p();)U.push(t());else for(U=new Array(l),i=0;i<l;++i)U[i]=t();return U;case 5:var k={};for(i=0;i<l||l<0&&!p();++i)k[t()]=t();return k;case 6:return r(t(),l);case 7:switch(l){case 20:return!1;case 21:return!0;case 22:return null;case 23:return e;default:return o(l)}}}();if(u!==t.byteLength)throw"Remaining bytes";return g}};void 0!==r&&r.exports?r.exports=f:t.CBOR||(t.CBOR=f)}(this)},{}],4:[function(t,r,e){!function(t){void 0!==r&&(r.exports=t);var e="listeners",n={on:function(t,r){return f(this,t).push(r),this},once:function(t,r){var e=this;return n.originalListener=r,f(e,t).push(n),e;function n(){o.call(e,t,n),r.apply(this,arguments)}},off:o,emit:function(t,r){var e=this,n=f(e,t,!0);if(!n)return!1;var i=arguments.length;if(1===i)n.forEach(function(t){t.call(e)});else if(2===i)n.forEach(function(t){t.call(e,r)});else{var o=Array.prototype.slice.call(arguments,1);n.forEach(function(t){t.apply(e,o)})}return!!n.length}};function i(t){for(var r in n)t[r]=n[r];return t}function o(t,r){var n;if(arguments.length){if(r){if(n=f(this,t,!0)){if(!(n=n.filter(function(t){return t!==r&&t.originalListener!==r})).length)return o.call(this,t);this[e][t]=n}}else if((n=this[e])&&(delete n[t],!Object.keys(n).length))return o.call(this)}else delete this[e];return this}function f(t,r,n){if(!n||t[e]){var i=t[e]||(t[e]={});return i[r]||(i[r]=[])}}i(t.prototype),t.mixin=i}(function t(){if(!(this instanceof t))return new t})},{}],5:[function(t,r,e){e.read=function(t,r,e,n,i){var o,f,u=8*i-n-1,a=(1<<u)-1,s=a>>1,c=-7,h=e?i-1:0,l=e?-1:1,p=t[r+h];for(h+=l,o=p&(1<<-c)-1,p>>=-c,c+=u;c>0;o=256*o+t[r+h],h+=l,c-=8);for(f=o&(1<<-c)-1,o>>=-c,c+=n;c>0;f=256*f+t[r+h],h+=l,c-=8);if(0===o)o=1-s;else{if(o===a)return f?NaN:1/0*(p?-1:1);f+=Math.pow(2,n),o-=s}return(p?-1:1)*f*Math.pow(2,o-n)},e.write=function(t,r,e,n,i,o){var f,u,a,s=8*o-i-1,c=(1<<s)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,f=c):(f=Math.floor(Math.log(r)/Math.LN2),r*(a=Math.pow(2,-f))<1&&(f--,a*=2),(r+=f+h>=1?l/a:l*Math.pow(2,1-h))*a>=2&&(f++,a/=2),f+h>=c?(u=0,f=c):f+h>=1?(u=(r*a-1)*Math.pow(2,i),f+=h):(u=r*Math.pow(2,h-1)*Math.pow(2,i),f=0));i>=8;t[e+p]=255&u,p+=d,u/=256,i-=8);for(f=f<<i|u,s+=i;s>0;t[e+p]=255&f,p+=d,f/=256,s-=8);t[e+p-d]|=128*y}},{}],6:[function(t,r,e){(function(t){!function(r){var e,n="undefined",i=n!==typeof t&&t,o=n!==typeof Uint8Array&&Uint8Array,f=n!==typeof ArrayBuffer&&ArrayBuffer,u=[0,0,0,0,0,0,0,0],a=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},s=4294967296,c=16777216;function h(t,a,h){var A=a?0:4,B=a?4:0,x=a?0:3,U=a?1:2,k=a?2:1,I=a?3:0,T=a?w:E,S=a?b:m,R=_.prototype,P="is"+t,C="_"+P;return R.buffer=void 0,R.offset=0,R[C]=!0,R.toNumber=L,R.toString=function(t){var r=this.buffer,e=this.offset,n=O(r,e+A),i=O(r,e+B),o="",f=!h&&2147483648&n;for(f&&(n=~n,i=s-i),t=t||10;;){var u=n%t*s+i;if(n=Math.floor(n/t),i=Math.floor(u/t),o=(u%t).toString(t)+o,!n&&!i)break}return f&&(o="-"+o),o},R.toJSON=L,R.toArray=l,i&&(R.toBuffer=p),o&&(R.toArrayBuffer=d),_[P]=function(t){return!(!t||!t[C])},r[t]=_,_;function _(t,r,i,a){return this instanceof _?function(t,r,i,a,c){if(o&&f&&(r instanceof f&&(r=new o(r)),a instanceof f&&(a=new o(a))),r||i||a||e){if(!y(r,i))c=i,a=r,i=0,r=new(e||Array)(8);t.buffer=r,t.offset=i|=0,n!==typeof a&&("string"==typeof a?function(t,r,e,n){var i=0,o=e.length,f=0,u=0;"-"===e[0]&&i++;for(var a=i;i<o;){var c=parseInt(e[i++],n);if(!(c>=0))break;u=u*n+c,f=f*n+Math.floor(u/s),u%=s}a&&(f=~f,u?u=s-u:f++),M(t,r+A,f),M(t,r+B,u)}(r,i,a,c||10):y(a,c)?v(r,i,a,c):"number"==typeof c?(M(r,i+A,a),M(r,i+B,c)):a>0?T(r,i,a):a<0?S(r,i,a):v(r,i,u,0))}else t.buffer=g(u,0)}(this,t,r,i,a):new _(t,r,i,a)}function L(){var t=this.buffer,r=this.offset,e=O(t,r+A),n=O(t,r+B);return h||(e|=0),e?e*s+n:n}function M(t,r,e){t[r+I]=255&e,e>>=8,t[r+k]=255&e,e>>=8,t[r+U]=255&e,e>>=8,t[r+x]=255&e}function O(t,r){return t[r+x]*c+(t[r+U]<<16)+(t[r+k]<<8)+t[r+I]}}function l(t){var r=this.buffer,n=this.offset;return e=null,!1!==t&&0===n&&8===r.length&&a(r)?r:g(r,n)}function p(r){var n=this.buffer,o=this.offset;if(e=i,!1!==r&&0===o&&8===n.length&&t.isBuffer(n))return n;var f=new i(8);return v(f,0,n,o),f}function d(t){var r=this.buffer,n=this.offset,i=r.buffer;if(e=o,!1!==t&&0===n&&i instanceof f&&8===i.byteLength)return i;var u=new o(8);return v(u,0,r,n),u.buffer}function y(t,r){var e=t&&t.length;return r|=0,e&&r+8<=e&&"string"!=typeof t[r]}function v(t,r,e,n){r|=0,n|=0;for(var i=0;i<8;i++)t[r++]=255&e[n++]}function g(t,r){return Array.prototype.slice.call(t,r,r+8)}function w(t,r,e){for(var n=r+8;n>r;)t[--n]=255&e,e/=256}function b(t,r,e){var n=r+8;for(e++;n>r;)t[--n]=255&-e^255,e/=256}function E(t,r,e){for(var n=r+8;r<n;)t[r++]=255&e,e/=256}function m(t,r,e){var n=r+8;for(e++;r<n;)t[r++]=255&-e^255,e/=256}h("Uint64BE",!0,!0),h("Int64BE",!0,!1),h("Uint64LE",!1,!0),h("Int64LE",!1,!1)}("object"==typeof e&&"string"!=typeof e.nodeName?e:this||{})}).call(this,t("buffer").Buffer)},{buffer:2}],7:[function(t,r,e){var n={}.toString;r.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],8:[function(t,r,e){e.encode=t("./encode").encode,e.decode=t("./decode").decode,e.Encoder=t("./encoder").Encoder,e.Decoder=t("./decoder").Decoder,e.createCodec=t("./ext").createCodec,e.codec=t("./codec").codec},{"./codec":17,"./decode":19,"./decoder":20,"./encode":22,"./encoder":23,"./ext":27}],9:[function(t,r,e){(function(t){function e(t){return t&&t.isBuffer&&t}r.exports=e(void 0!==t&&t)||e(this.Buffer)||e("undefined"!=typeof window&&window.Buffer)||this.Buffer}).call(this,t("buffer").Buffer)},{buffer:2}],10:[function(t,r,e){e.copy=function(t,r,e,n){var i;e||(e=0),n||0===n||(n=this.length),r||(r=0);var o=n-e;if(t===this&&e<r&&r<n)for(i=o-1;i>=0;i--)t[i+r]=this[i+e];else for(i=0;i<o;i++)t[i+r]=this[i+e];return o},e.toString=function(t,r,e){var n=0|r;e||(e=this.length);for(var i="",o=0;n<e;)(o=this[n++])<128?i+=String.fromCharCode(o):(192==(224&o)?o=(31&o)<<6|63&this[n++]:224==(240&o)?o=(15&o)<<12|(63&this[n++])<<6|63&this[n++]:240==(248&o)&&(o=(7&o)<<18|(63&this[n++])<<12|(63&this[n++])<<6|63&this[n++]),o>=65536?(o-=65536,i+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):i+=String.fromCharCode(o));return i},e.write=function(t,r){for(var e=r||(r|=0),n=t.length,i=0,o=0;o<n;)(i=t.charCodeAt(o++))<128?this[e++]=i:i<2048?(this[e++]=192|i>>>6,this[e++]=128|63&i):i<55296||i>57343?(this[e++]=224|i>>>12,this[e++]=128|i>>>6&63,this[e++]=128|63&i):(i=65536+(i-55296<<10|t.charCodeAt(o++)-56320),this[e++]=240|i>>>18,this[e++]=128|i>>>12&63,this[e++]=128|i>>>6&63,this[e++]=128|63&i);return e-r}},{}],11:[function(t,r,e){var n=t("./bufferish");function i(t){return new Array(t)}(e=r.exports=i(0)).alloc=i,e.concat=n.concat,e.from=function(t){if(!n.isBuffer(t)&&n.isView(t))t=n.Uint8Array.from(t);else if(n.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return n.from.call(e,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(t)}},{"./bufferish":15}],12:[function(t,r,e){var n=t("./bufferish"),i=n.global;function o(t){return new i(t)}(e=r.exports=n.hasBuffer?o(0):[]).alloc=n.hasBuffer&&i.alloc||o,e.concat=n.concat,e.from=function(t){if(!n.isBuffer(t)&&n.isView(t))t=n.Uint8Array.from(t);else if(n.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return n.from.call(e,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(t):new i(t)}},{"./bufferish":15}],13:[function(t,r,e){var n,i=t("./buffer-lite");e.copy=s,e.slice=c,e.toString=function(t,r,e){return(!u&&o.isBuffer(this)?this.toString:i.toString).apply(this,arguments)},e.write=(n="write",function(){return(this[n]||i[n]).apply(this,arguments)});var o=t("./bufferish"),f=o.global,u=o.hasBuffer&&"TYPED_ARRAY_SUPPORT"in f,a=u&&!f.TYPED_ARRAY_SUPPORT;function s(t,r,e,n){var f=o.isBuffer(this),u=o.isBuffer(t);if(f&&u)return this.copy(t,r,e,n);if(a||f||u||!o.isView(this)||!o.isView(t))return i.copy.call(this,t,r,e,n);var s=e||null!=n?c.call(this,e,n):this;return t.set(s,r),s.length}function c(t,r){var e=this.slice||!a&&this.subarray;if(e)return e.call(this,t,r);var n=o.alloc.call(this,r-t);return s.call(this,n,0,t,r),n}},{"./buffer-lite":10,"./bufferish":15}],14:[function(t,r,e){var n=t("./bufferish");function i(t){return new Uint8Array(t)}(e=r.exports=n.hasArrayBuffer?i(0):[]).alloc=i,e.concat=n.concat,e.from=function(t){if(n.isView(t)){var r=t.byteOffset,i=t.byteLength;(t=t.buffer).byteLength!==i&&(t.slice?t=t.slice(r,r+i):(t=new Uint8Array(t)).byteLength!==i&&(t=Array.prototype.slice.call(t,r,r+i)))}else{if("string"==typeof t)return n.from.call(e,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(t)}},{"./bufferish":15}],15:[function(t,r,e){var n=e.global=t("./buffer-global"),i=e.hasBuffer=n&&!!n.isBuffer,o=e.hasArrayBuffer="undefined"!=typeof ArrayBuffer,f=e.isArray=t("isarray");e.isArrayBuffer=o?function(t){return t instanceof ArrayBuffer||d(t)}:v;var u=e.isBuffer=i?n.isBuffer:v,a=e.isView=o?ArrayBuffer.isView||g("ArrayBuffer","buffer"):v;e.alloc=p,e.concat=function(t,r){r||(r=0,Array.prototype.forEach.call(t,function(t){r+=t.length}));var n=this!==e&&this||t[0],i=p.call(n,r),o=0;return Array.prototype.forEach.call(t,function(t){o+=l.copy.call(t,i,o)}),i},e.from=function(t){return"string"==typeof t?function(t){var r=3*t.length,e=p.call(this,r),n=l.write.call(e,t);return r!==n&&(e=l.slice.call(e,0,n)),e}.call(this,t):y(this).from(t)};var s=e.Array=t("./bufferish-array"),c=e.Buffer=t("./bufferish-buffer"),h=e.Uint8Array=t("./bufferish-uint8array"),l=e.prototype=t("./bufferish-proto");function p(t){return y(this).alloc(t)}var d=g("ArrayBuffer");function y(t){return u(t)?c:a(t)?h:f(t)?s:i?c:o?h:s}function v(){return!1}function g(t,r){return t="[object "+t+"]",function(e){return null!=e&&{}.toString.call(r?e[r]:e)===t}}},{"./buffer-global":9,"./bufferish-array":11,"./bufferish-buffer":12,"./bufferish-proto":13,"./bufferish-uint8array":14,isarray:7}],16:[function(t,r,e){var n=t("isarray");e.createCodec=u,e.install=function(t){for(var r in t)o.prototype[r]=f(o.prototype[r],t[r])},e.filter=function(t){return n(t)?function(t){return t=t.slice(),function(e){return t.reduce(r,e)};function r(t,r){return r(t)}}(t):t};var i=t("./bufferish");function o(t){if(!(this instanceof o))return new o(t);this.options=t,this.init()}function f(t,r){return t&&r?function(){return t.apply(this,arguments),r.apply(this,arguments)}:t||r}function u(t){return new o(t)}o.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=i.Uint8Array),this},e.preset=u({preset:!0})},{"./bufferish":15,isarray:7}],17:[function(t,r,e){t("./read-core"),t("./write-core"),e.codec={preset:t("./codec-base").preset}},{"./codec-base":16,"./read-core":29,"./write-core":32}],18:[function(t,r,e){e.DecodeBuffer=i;var n=t("./read-core").preset;function i(t){if(!(this instanceof i))return new i(t);if(t&&(this.options=t,t.codec)){var r=this.codec=t.codec;r.bufferish&&(this.bufferish=r.bufferish)}}t("./flex-buffer").FlexDecoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.fetch=function(){return this.codec.decode(this)}},{"./flex-buffer":28,"./read-core":29}],19:[function(t,r,e){e.decode=function(t,r){var e=new n(r);return e.write(t),e.read()};var n=t("./decode-buffer").DecodeBuffer},{"./decode-buffer":18}],20:[function(t,r,e){e.Decoder=o;var n=t("event-lite"),i=t("./decode-buffer").DecodeBuffer;function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}o.prototype=new i,n.mixin(o.prototype),o.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},o.prototype.push=function(t){this.emit("data",t)},o.prototype.end=function(t){this.decode(t),this.emit("end")}},{"./decode-buffer":18,"event-lite":4}],21:[function(t,r,e){e.EncodeBuffer=i;var n=t("./write-core").preset;function i(t){if(!(this instanceof i))return new i(t);if(t&&(this.options=t,t.codec)){var r=this.codec=t.codec;r.bufferish&&(this.bufferish=r.bufferish)}}t("./flex-buffer").FlexEncoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.write=function(t){this.codec.encode(this,t)}},{"./flex-buffer":28,"./write-core":32}],22:[function(t,r,e){e.encode=function(t,r){var e=new n(r);return e.write(t),e.read()};var n=t("./encode-buffer").EncodeBuffer},{"./encode-buffer":21}],23:[function(t,r,e){e.Encoder=o;var n=t("event-lite"),i=t("./encode-buffer").EncodeBuffer;function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}o.prototype=new i,n.mixin(o.prototype),o.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},o.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},{"./encode-buffer":21,"event-lite":4}],24:[function(t,r,e){e.ExtBuffer=function t(r,e){if(!(this instanceof t))return new t(r,e);this.buffer=n.from(r),this.type=e};var n=t("./bufferish")},{"./bufferish":15}],25:[function(t,r,e){e.setExtPackers=function(t){t.addExtPacker(14,Error,[h,a]),t.addExtPacker(1,EvalError,[h,a]),t.addExtPacker(2,RangeError,[h,a]),t.addExtPacker(3,ReferenceError,[h,a]),t.addExtPacker(4,SyntaxError,[h,a]),t.addExtPacker(5,TypeError,[h,a]),t.addExtPacker(6,URIError,[h,a]),t.addExtPacker(10,RegExp,[c,a]),t.addExtPacker(11,Boolean,[s,a]),t.addExtPacker(12,String,[s,a]),t.addExtPacker(13,Date,[Number,a]),t.addExtPacker(15,Number,[s,a]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,f),t.addExtPacker(18,Uint8Array,f),t.addExtPacker(19,Int16Array,f),t.addExtPacker(20,Uint16Array,f),t.addExtPacker(21,Int32Array,f),t.addExtPacker(22,Uint32Array,f),t.addExtPacker(23,Float32Array,f),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,f),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,f),t.addExtPacker(26,ArrayBuffer,f),t.addExtPacker(29,DataView,f)),i.hasBuffer&&t.addExtPacker(27,o,i.from)};var n,i=t("./bufferish"),o=i.global,f=i.Uint8Array.from,u={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(r){return n||(n=t("./encode").encode),n(r)}function s(t){return t.valueOf()}function c(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var r=[t.pop()];return r.unshift(t.join("/")),r}function h(t){var r={};for(var e in u)r[e]=t[e];return r}},{"./bufferish":15,"./encode":22}],26:[function(t,r,e){e.setExtUnpackers=function(t){t.addExtUnpacker(14,[u,s(Error)]),t.addExtUnpacker(1,[u,s(EvalError)]),t.addExtUnpacker(2,[u,s(RangeError)]),t.addExtUnpacker(3,[u,s(ReferenceError)]),t.addExtUnpacker(4,[u,s(SyntaxError)]),t.addExtUnpacker(5,[u,s(TypeError)]),t.addExtUnpacker(6,[u,s(URIError)]),t.addExtUnpacker(10,[u,a]),t.addExtUnpacker(11,[u,c(Boolean)]),t.addExtUnpacker(12,[u,c(String)]),t.addExtUnpacker(13,[u,c(Date)]),t.addExtUnpacker(15,[u,c(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,c(Int8Array)),t.addExtUnpacker(18,c(Uint8Array)),t.addExtUnpacker(19,[h,c(Int16Array)]),t.addExtUnpacker(20,[h,c(Uint16Array)]),t.addExtUnpacker(21,[h,c(Int32Array)]),t.addExtUnpacker(22,[h,c(Uint32Array)]),t.addExtUnpacker(23,[h,c(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[h,c(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,c(Uint8ClampedArray)),t.addExtUnpacker(26,h),t.addExtUnpacker(29,[h,c(DataView)])),i.hasBuffer&&t.addExtUnpacker(27,c(o))};var n,i=t("./bufferish"),o=i.global,f={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function u(r){return n||(n=t("./decode").decode),n(r)}function a(t){return RegExp.apply(null,t)}function s(t){return function(r){var e=new t;for(var n in f)e[n]=r[n];return e}}function c(t){return function(r){return new t(r)}}function h(t){return new Uint8Array(t).buffer}},{"./bufferish":15,"./decode":19}],27:[function(t,r,e){t("./read-core"),t("./write-core"),e.createCodec=t("./codec-base").createCodec},{"./codec-base":16,"./read-core":29,"./write-core":32}],28:[function(t,r,e){e.FlexDecoder=u,e.FlexEncoder=a;var n=t("./bufferish"),i=2048,o=65536,f="BUFFER_SHORTAGE";function u(){if(!(this instanceof u))return new u}function a(){if(!(this instanceof a))return new a}function s(){throw new Error("method not implemented: write()")}function c(){throw new Error("method not implemented: fetch()")}function h(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function l(t){(this.buffers||(this.buffers=[])).push(t)}function p(){return(this.buffers||(this.buffers=[])).shift()}function d(t){return function(r){for(var e in t)r[e]=t[e];return r}}u.mixin=d({bufferish:n,write:function(t){var r=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=r?t?this.bufferish.concat([r,t]):r:t,this.offset=0},fetch:c,flush:function(){for(;this.offset<this.buffer.length;){var t,r=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=f)throw t;this.offset=r;break}this.push(t)}},push:l,pull:p,read:h,reserve:function(t){var r=this.offset,e=r+t;if(e>this.buffer.length)throw new Error(f);return this.offset=e,r},offset:0}),u.mixin(u.prototype),a.mixin=d({bufferish:n,write:s,fetch:function(){var t=this.start;if(t<this.offset){var r=this.start=this.offset;return n.prototype.slice.call(this.buffer,t,r)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:l,pull:function(){var t=this.buffers||(this.buffers=[]),r=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,r},read:h,reserve:function(t){var r=0|t;if(this.buffer){var e=this.buffer.length,n=0|this.offset,i=n+r;if(i<e)return this.offset=i,n;this.flush(),t=Math.max(t,Math.min(2*e,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=r,0},send:function(t){var r=t.length;if(r>this.minBufferSize)this.flush(),this.push(t);else{var e=this.reserve(r);n.prototype.copy.call(t,this.buffer,e)}},maxBufferSize:o,minBufferSize:i,offset:0,start:0}),a.mixin(a.prototype)},{"./bufferish":15}],29:[function(t,r,e){var n=t("./ext-buffer").ExtBuffer,i=t("./ext-unpacker"),o=t("./read-format").readUint8,f=t("./read-token"),u=t("./codec-base");function a(){var t=this.options;return this.decode=function(t){var r=f.getReadToken(t);return function(t){var e=o(t),n=r[e];if(!n)throw new Error("Invalid type: "+(e?"0x"+e.toString(16):e));return n(t)}}(t),t&&t.preset&&i.setExtUnpackers(this),this}u.install({addExtUnpacker:function(t,r){(this.extUnpackers||(this.extUnpackers=[]))[t]=u.filter(r)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(r){return new n(r,t)}},init:a}),e.preset=a.call(u.preset)},{"./codec-base":16,"./ext-buffer":24,"./ext-unpacker":26,"./read-format":30,"./read-token":31}],30:[function(t,r,e){var n=t("ieee754"),i=t("int64-buffer"),o=i.Uint64BE,f=i.Int64BE;e.getReadFormat=function(t){var r=u.hasArrayBuffer&&t&&t.binarraybuffer,e=t&&t.int64;return{map:s&&t&&t.usemap?l:h,array:p,str:d,bin:r?v:y,ext:g,uint8:w,uint16:E,uint32:A,uint64:x(8,e?I:U),int8:b,int16:m,int32:B,int64:x(8,e?T:k),float32:x(4,S),float64:x(8,R)}},e.readUint8=w;var u=t("./bufferish"),a=t("./bufferish-proto"),s="undefined"!=typeof Map,c=!0;function h(t,r){var e,n={},i=new Array(r),o=new Array(r),f=t.codec.decode;for(e=0;e<r;e++)i[e]=f(t),o[e]=f(t);for(e=0;e<r;e++)n[i[e]]=o[e];return n}function l(t,r){var e,n=new Map,i=new Array(r),o=new Array(r),f=t.codec.decode;for(e=0;e<r;e++)i[e]=f(t),o[e]=f(t);for(e=0;e<r;e++)n.set(i[e],o[e]);return n}function p(t,r){for(var e=new Array(r),n=t.codec.decode,i=0;i<r;i++)e[i]=n(t);return e}function d(t,r){var e=t.reserve(r),n=e+r;return a.toString.call(t.buffer,"utf-8",e,n)}function y(t,r){var e=t.reserve(r),n=e+r,i=a.slice.call(t.buffer,e,n);return u.from(i)}function v(t,r){var e=t.reserve(r),n=e+r,i=a.slice.call(t.buffer,e,n);return u.Uint8Array.from(i).buffer}function g(t,r){var e=t.reserve(r+1),n=t.buffer[e++],i=e+r,o=t.codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return o(a.slice.call(t.buffer,e,i))}function w(t){var r=t.reserve(1);return t.buffer[r]}function b(t){var r=t.reserve(1),e=t.buffer[r];return 128&e?e-256:e}function E(t){var r=t.reserve(2),e=t.buffer;return e[r++]<<8|e[r]}function m(t){var r=t.reserve(2),e=t.buffer,n=e[r++]<<8|e[r];return 32768&n?n-65536:n}function A(t){var r=t.reserve(4),e=t.buffer;return 16777216*e[r++]+(e[r++]<<16)+(e[r++]<<8)+e[r]}function B(t){var r=t.reserve(4),e=t.buffer;return e[r++]<<24|e[r++]<<16|e[r++]<<8|e[r]}function x(t,r){return function(e){var n=e.reserve(t);return r.call(e.buffer,n,c)}}function U(t){return new o(this,t).toNumber()}function k(t){return new f(this,t).toNumber()}function I(t){return new o(this,t)}function T(t){return new f(this,t)}function S(t){return n.read(this,t,!1,23,4)}function R(t){return n.read(this,t,!1,52,8)}},{"./bufferish":15,"./bufferish-proto":13,ieee754:5,"int64-buffer":6}],31:[function(t,r,e){var n=t("./read-format");function i(t){var r,e=new Array(256);for(r=0;r<=127;r++)e[r]=o(r);for(r=128;r<=143;r++)e[r]=u(r-128,t.map);for(r=144;r<=159;r++)e[r]=u(r-144,t.array);for(r=160;r<=191;r++)e[r]=u(r-160,t.str);for(e[192]=o(null),e[193]=null,e[194]=o(!1),e[195]=o(!0),e[196]=f(t.uint8,t.bin),e[197]=f(t.uint16,t.bin),e[198]=f(t.uint32,t.bin),e[199]=f(t.uint8,t.ext),e[200]=f(t.uint16,t.ext),e[201]=f(t.uint32,t.ext),e[202]=t.float32,e[203]=t.float64,e[204]=t.uint8,e[205]=t.uint16,e[206]=t.uint32,e[207]=t.uint64,e[208]=t.int8,e[209]=t.int16,e[210]=t.int32,e[211]=t.int64,e[212]=u(1,t.ext),e[213]=u(2,t.ext),e[214]=u(4,t.ext),e[215]=u(8,t.ext),e[216]=u(16,t.ext),e[217]=f(t.uint8,t.str),e[218]=f(t.uint16,t.str),e[219]=f(t.uint32,t.str),e[220]=f(t.uint16,t.array),e[221]=f(t.uint32,t.array),e[222]=f(t.uint16,t.map),e[223]=f(t.uint32,t.map),r=224;r<=255;r++)e[r]=o(r-256);return e}function o(t){return function(){return t}}function f(t,r){return function(e){var n=t(e);return r(e,n)}}function u(t,r){return function(e){return r(e,t)}}e.getReadToken=function(t){var r=n.getReadFormat(t);return t&&t.useraw?function(t){var r,e=i(t).slice();for(e[217]=e[196],e[218]=e[197],e[219]=e[198],r=160;r<=191;r++)e[r]=u(r-160,t.bin);return e}(r):i(r)}},{"./read-format":30}],32:[function(t,r,e){var n=t("./ext-buffer").ExtBuffer,i=t("./ext-packer"),o=t("./write-type"),f=t("./codec-base");function u(){var t=this.options;return this.encode=function(t){var r=o.getWriteType(t);return function(t,e){var n=r[typeof e];if(!n)throw new Error('Unsupported type "'+typeof e+'": '+e);n(t,e)}}(t),t&&t.preset&&i.setExtPackers(this),this}f.install({addExtPacker:function(t,r,e){e=f.filter(e);var i=r.name;function o(r){return e&&(r=e(r)),new n(r,t)}i&&"Object"!==i?(this.extPackers||(this.extPackers={}))[i]=o:(this.extEncoderList||(this.extEncoderList=[])).unshift([r,o])},getExtPacker:function(t){var r=this.extPackers||(this.extPackers={}),e=t.constructor,n=e&&e.name&&r[e.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,f=0;f<o;f++){var u=i[f];if(e===u[0])return u[1]}},init:u}),e.preset=u.call(f.preset)},{"./codec-base":16,"./ext-buffer":24,"./ext-packer":25,"./write-type":34}],33:[function(t,r,e){var n=t("ieee754"),i=t("int64-buffer"),o=i.Uint64BE,f=i.Int64BE,u=t("./write-uint8").uint8,a=t("./bufferish"),s=a.global,c=a.hasBuffer&&"TYPED_ARRAY_SUPPORT"in s&&!s.TYPED_ARRAY_SUPPORT,h=a.hasBuffer&&s.prototype||{};function l(){var t=u.slice();return t[196]=p(196),t[197]=d(197),t[198]=y(198),t[199]=p(199),t[200]=d(200),t[201]=y(201),t[202]=v(202,4,h.writeFloatBE||b,!0),t[203]=v(203,8,h.writeDoubleBE||E,!0),t[204]=p(204),t[205]=d(205),t[206]=y(206),t[207]=v(207,8,g),t[208]=p(208),t[209]=d(209),t[210]=y(210),t[211]=v(211,8,w),t[217]=p(217),t[218]=d(218),t[219]=y(219),t[220]=d(220),t[221]=y(221),t[222]=d(222),t[223]=y(223),t}function p(t){return function(r,e){var n=r.reserve(2),i=r.buffer;i[n++]=t,i[n]=e}}function d(t){return function(r,e){var n=r.reserve(3),i=r.buffer;i[n++]=t,i[n++]=e>>>8,i[n]=e}}function y(t){return function(r,e){var n=r.reserve(5),i=r.buffer;i[n++]=t,i[n++]=e>>>24,i[n++]=e>>>16,i[n++]=e>>>8,i[n]=e}}function v(t,r,e,n){return function(i,o){var f=i.reserve(r+1);i.buffer[f++]=t,e.call(i.buffer,o,f,n)}}function g(t,r){new o(this,r,t)}function w(t,r){new f(this,r,t)}function b(t,r){n.write(this,t,r,!1,23,4)}function E(t,r){n.write(this,t,r,!1,52,8)}e.getWriteToken=function(t){return t&&t.uint8array?function(){var t=l();return t[202]=v(202,4,b),t[203]=v(203,8,E),t}():c||a.hasBuffer&&t&&t.safe?function(){var t=u.slice();return t[196]=v(196,1,s.prototype.writeUInt8),t[197]=v(197,2,s.prototype.writeUInt16BE),t[198]=v(198,4,s.prototype.writeUInt32BE),t[199]=v(199,1,s.prototype.writeUInt8),t[200]=v(200,2,s.prototype.writeUInt16BE),t[201]=v(201,4,s.prototype.writeUInt32BE),t[202]=v(202,4,s.prototype.writeFloatBE),t[203]=v(203,8,s.prototype.writeDoubleBE),t[204]=v(204,1,s.prototype.writeUInt8),t[205]=v(205,2,s.prototype.writeUInt16BE),t[206]=v(206,4,s.prototype.writeUInt32BE),t[207]=v(207,8,g),t[208]=v(208,1,s.prototype.writeInt8),t[209]=v(209,2,s.prototype.writeInt16BE),t[210]=v(210,4,s.prototype.writeInt32BE),t[211]=v(211,8,w),t[217]=v(217,1,s.prototype.writeUInt8),t[218]=v(218,2,s.prototype.writeUInt16BE),t[219]=v(219,4,s.prototype.writeUInt32BE),t[220]=v(220,2,s.prototype.writeUInt16BE),t[221]=v(221,4,s.prototype.writeUInt32BE),t[222]=v(222,2,s.prototype.writeUInt16BE),t[223]=v(223,4,s.prototype.writeUInt32BE),t}():l()}},{"./bufferish":15,"./write-uint8":35,ieee754:5,"int64-buffer":6}],34:[function(t,r,e){var n=t("isarray"),i=t("int64-buffer"),o=i.Uint64BE,f=i.Int64BE,u=t("./bufferish"),a=t("./bufferish-proto"),s=t("./write-token"),c=t("./write-uint8").uint8,h=t("./ext-buffer").ExtBuffer,l="undefined"!=typeof Uint8Array,p="undefined"!=typeof Map,d=[];d[1]=212,d[2]=213,d[4]=214,d[8]=215,d[16]=216,e.getWriteType=function(t){var r=s.getWriteToken(t),e=t&&t.useraw,i=l&&t&&t.binarraybuffer,y=i?u.isArrayBuffer:u.isBuffer,v=i?function(t,r){E(t,new Uint8Array(r))}:E,g=p&&t&&t.usemap?function(t,e){if(!(e instanceof Map))return m(t,e);var n=e.size;r[n<16?128+n:n<=65535?222:223](t,n);var i=t.codec.encode;e.forEach(function(r,e,n){i(t,e),i(t,r)})}:m;return{boolean:function(t,e){r[e?195:194](t,e)},function:b,number:function(t,e){var n=0|e;e===n?r[-32<=n&&n<=127?255&n:0<=n?n<=255?204:n<=65535?205:206:-128<=n?208:-32768<=n?209:210](t,n):r[203](t,e)},object:e?function(t,e){if(y(e))return function(t,e){var n=e.length;r[n<32?160+n:n<=65535?218:219](t,n),t.send(e)}(t,e);w(t,e)}:w,string:function(t){return function(e,n){var i=n.length,o=5+3*i;e.offset=e.reserve(o);var f=e.buffer,u=t(i),s=e.offset+u;i=a.write.call(f,n,s);var c=t(i);if(u!==c){var h=s+c-u,l=s+i;a.copy.call(f,f,h,s,l)}r[1===c?160+i:c<=3?215+c:219](e,i),e.offset+=i}}(e?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5}),symbol:b,undefined:b};function w(t,e){if(null===e)return b(t,e);if(y(e))return v(t,e);if(n(e))return function(t,e){var n=e.length;r[n<16?144+n:n<=65535?220:221](t,n);for(var i=t.codec.encode,o=0;o<n;o++)i(t,e[o])}(t,e);if(o.isUint64BE(e))return function(t,e){r[207](t,e.toArray())}(t,e);if(f.isInt64BE(e))return function(t,e){r[211](t,e.toArray())}(t,e);var i=t.codec.getExtPacker(e);if(i&&(e=i(e)),e instanceof h)return function(t,e){var n=e.buffer,i=n.length,o=d[i]||(i<255?199:i<=65535?200:201);r[o](t,i),c[e.type](t),t.send(n)}(t,e);g(t,e)}function b(t,e){r[192](t,e)}function E(t,e){var n=e.length;r[n<255?196:n<=65535?197:198](t,n),t.send(e)}function m(t,e){var n=Object.keys(e),i=n.length;r[i<16?128+i:i<=65535?222:223](t,i);var o=t.codec.encode;n.forEach(function(r){o(t,r),o(t,e[r])})}}},{"./bufferish":15,"./bufferish-proto":13,"./ext-buffer":24,"./write-token":33,"./write-uint8":35,"int64-buffer":6,isarray:7}],35:[function(t,r,e){for(var n=e.uint8=new Array(256),i=0;i<=255;i++)n[i]=o(i);function o(t){return function(r){var e=r.reserve(1);r.buffer[e]=t}}},{}],36:[function(t,r,e){var n,i,o=r.exports={};function f(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===f||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(r){try{return n.call(null,t,0)}catch(r){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:f}catch(t){n=f}try{i="function"==typeof clearTimeout?clearTimeout:u}catch(t){i=u}}();var s,c=[],h=!1,l=-1;function p(){h&&s&&(h=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!h){var t=a(p);h=!0;for(var r=c.length;r;){for(s=c,c=[];++l<r;)s&&s[l].run();l=-1,r=c.length}s=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===u||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(r){try{return i.call(null,t)}catch(r){return i.call(this,t)}}}(t)}}function y(t,r){this.fun=t,this.array=r}function v(){}o.nextTick=function(t){var r=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)r[e-1]=arguments[e];c.push(new y(t,r)),1!==c.length||h||a(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],37:[function(t,r,e){(function(e){"use strict";var n=o(t("cbor-js")),i=o(t("msgpack-lite"));function o(t){return t&&t.__esModule?t:{default:t}}function f(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u={cbor:{encode:function(t){try{t=n.default.encode(t)}catch(t){throw new Error("failed to encode CBOR format")}return!ArrayBuffer.isView(t)&&e.browser&&(t=new Uint8Array(t)),t},decode:function(t){ArrayBuffer.isView(t)&&e.browser&&(t=t.buffer);try{t=n.default.decode(t)}catch(t){throw new Error("failed to decode CBOR format")}return t}},msgpack:{encode:function(t){try{t=i.default.encode(t)}catch(t){throw new Error("failed to encode MsgPack format")}return t},decode:function(t){try{t=i.default.decode(t)}catch(t){throw new Error("failed to decode MsgPack format")}return t}},json:{encode:function(t){try{t=JSON.stringify(t)}catch(t){throw new Error("failed to encode JSON format")}return t},decode:function(t){try{t=JSON.parse(t)}catch(t){throw new Error("failed to decode JSON format")}return t}}},a=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cbor";if(function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===u[r])throw new Error("invalid coded");this.type=r}return function(t,r,e){r&&f(t.prototype,r),e&&f(t,e)}(t,[{key:"encode",value:function(t){return u[this.type].encode(t)}},{key:"decode",value:function(t){return u[this.type].decode(t)}}]),t}();r.exports=a}).call(this,t("_process"))},{_process:36,"cbor-js":3,"msgpack-lite":8}]},{},[37])(37)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],2:[function(_dereq_,module,exports){
"use strict";var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function addListener(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new EE(n,r||e,i),s=prefix?prefix+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function clearEvent(e,t){0==--e._eventsCount?e._events=new Events:delete e._events[t]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)has.call(e,t)&&n.push(prefix?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},EventEmitter.prototype.listeners=function(e){var t=prefix?prefix+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},EventEmitter.prototype.listenerCount=function(e){var t=prefix?prefix+e:e,n=this._events[t];return n?n.fn?1:n.length:0},EventEmitter.prototype.emit=function(e,t,n,r,i,o){var s=prefix?prefix+e:e;if(!this._events[s])return!1;var f,c,v=this._events[s],a=arguments.length;if(v.fn){switch(v.once&&this.removeListener(e,v.fn,void 0,!0),a){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,t),!0;case 3:return v.fn.call(v.context,t,n),!0;case 4:return v.fn.call(v.context,t,n,r),!0;case 5:return v.fn.call(v.context,t,n,r,i),!0;case 6:return v.fn.call(v.context,t,n,r,i,o),!0}for(c=1,f=new Array(a-1);c<a;c++)f[c-1]=arguments[c];v.fn.apply(v.context,f)}else{var p,l=v.length;for(c=0;c<l;c++)switch(v[c].once&&this.removeListener(e,v[c].fn,void 0,!0),a){case 1:v[c].fn.call(v[c].context);break;case 2:v[c].fn.call(v[c].context,t);break;case 3:v[c].fn.call(v[c].context,t,n);break;case 4:v[c].fn.call(v[c].context,t,n,r);break;default:if(!f)for(p=1,f=new Array(a-1);p<a;p++)f[p-1]=arguments[p];v[c].fn.apply(v[c].context,f)}}return!0},EventEmitter.prototype.on=function(e,t,n){return addListener(this,e,t,n,!1)},EventEmitter.prototype.once=function(e,t,n){return addListener(this,e,t,n,!0)},EventEmitter.prototype.removeListener=function(e,t,n,r){var i=prefix?prefix+e:e;if(!this._events[i])return this;if(!t)return clearEvent(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||clearEvent(this,i);else{for(var s=0,f=[],c=o.length;s<c;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&f.push(o[s]);f.length?this._events[i]=1===f.length?f[0]:f:clearEvent(this,i)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t;return e?(t=prefix?prefix+e:e,this._events[t]&&clearEvent(this,t)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,"undefined"!=typeof module&&(module.exports=EventEmitter);
},{}],3:[function(_dereq_,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],4:[function(_dereq_,module,exports){
(function (process){
"use strict";var _eventemitter=_interopRequireDefault(_dereq_("eventemitter3")),_encodr=_interopRequireDefault(_dereq_("encodr"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var mkProp=function(e,t,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object.defineProperty(e,t,{configurable:!1,enumerable:!1,writable:i,value:r})},Frame=function(){function e(t){_classCallCheck(this,e),mkProp(this,"channel",t),this.reset()}return _createClass(e,[{key:"reset",value:function(){this.fid=0,this.rid=0,this.type="MESSAGE",this.data=null}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.fid=e.fid?e.fid:this.channel.fid(),this.rid=e.rid?e.rid:t?t.fid:0,this.type=e.type?e.type:"MESSAGE",this.data=e.data?e.data:null,this}},{key:"import",value:function(e){var t=this.channel.codec.decode(e);return this.fid=t[0],this.rid=t[1],this.type=t[2],this.data=t[3],this}},{key:"export",value:function(){var e=[this.fid,this.rid,this.type,this.data];return this.channel.codec.encode(e)}}]),e}(),WebSocketFramed=function(e){function t(e){var r,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json";return _classCallCheck(this,t),r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)),mkProp(_assertThisInitialized(r),"ws",e),mkProp(_assertThisInitialized(r),"codec",new _encodr.default(n)),mkProp(_assertThisInitialized(r),"fid",(i=0,function(){return++i>=4294967294&&(i=1),i})),r.ws.addEventListener("message",function(e){var t=new Frame(_assertThisInitialized(r));try{var i=e.data;"string"!=typeof i&&!ArrayBuffer.isView(i)&&process.browser&&(i=new Uint8Array(i)),t.import(i)}catch(e){return void r.emit("error",e)}e.frame=t,r.emit("message",e)}),r}return _inherits(t,_eventemitter.default),_createClass(t,[{key:"send",value:function(e,t){var r=new Frame(this);r.set(e,t);var i=r.export();return"string"!=typeof i&&ArrayBuffer.isView(i)&&process.browser&&(i=i.buffer),this.ws.send(i),{frame:r,data:i}}}]),t}();module.exports=WebSocketFramed;
}).call(this,_dereq_('_process'))
},{"_process":3,"encodr":1,"eventemitter3":2}]},{},[4])(4)
});
